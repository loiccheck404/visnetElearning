<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-content">
      <div class="logo">
        <h2>VISNET</h2>
      </div>
      <nav class="nav-links">
        <a routerLink="/dashboard/admin" routerLinkActive="active">Dashboard</a>
        <a routerLink="/dashboard/admin/users">Users</a>
        <a routerLink="/dashboard/admin/courses">Courses</a>
        <a routerLink="/dashboard/profile">Profile</a>
      </nav>
      <div class="user-menu">
        @if (currentUser()) {
        <app-theme-toggle></app-theme-toggle>
        <div class="user-info">
          <div class="user-avatar admin">
            {{ currentUser()!.firstName.charAt(0) }}{{ currentUser()!.lastName.charAt(0) }}
          </div>
          <div class="user-details">
            <span class="user-name"
              >{{ currentUser()!.firstName }} {{ currentUser()!.lastName }}</span
            >
            <span class="user-role">Administrator</span>
          </div>
        </div>
        <button class="logout-btn" (click)="onLogout()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          Logout
        </button>
        }
      </div>
    </div>
  </header>

  <main class="dashboard-main">
    <section class="welcome-section">
      <h1>{{ getGreeting() }}, {{ currentUser()?.firstName }}!</h1>
      <p>Platform Overview and Management</p>
    </section>

    <section class="stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <div
            class="stat-icon"
            style="background: linear-gradient(135deg, #8b7dff 0%, #b794f6 100%)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
          </div>
          <div class="stat-info">
            <h3>{{ platformStats().totalUsers }}</h3>
            <p>Total Users</p>
            <button class="stat-action" (click)="manageUsers()">Manage</button>
          </div>
        </div>

        <div class="stat-card">
          <div
            class="stat-icon"
            style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
          </div>
          <div class="stat-info">
            <h3>{{ platformStats().totalCourses }}</h3>
            <p>Total Courses</p>
            <button class="stat-action" (click)="manageCourses()">Manage</button>
          </div>
        </div>

        <div class="stat-card">
          <div
            class="stat-icon"
            style="background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
              <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
            </svg>
          </div>
          <div class="stat-info">
            <h3>{{ platformStats().totalInstructors }}</h3>
            <p>Instructors</p>
          </div>
        </div>

        <div class="stat-card">
          <div
            class="stat-icon"
            style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
          <div class="stat-info">
            <h3>{{ platformStats().totalStudents }}</h3>
            <p>Students</p>
          </div>
        </div>
      </div>
    </section>

    <div class="two-column-layout">
      <div class="left-column">
        <section class="card-section">
          <div class="section-header">
            <h2>Pending Approvals</h2>
            <span class="badge">{{ pendingCourses().length }}</span>
          </div>
          <div class="pending-list">
            @for (course of pendingCourses(); track course.id) {
            <div class="pending-item">
              <div class="pending-info">
                <h4>{{ course.title }}</h4>
                <p>By {{ course.instructor }}</p>
                <span class="time-ago">{{ course.submittedDate }}</span>
              </div>
              <div class="pending-actions">
                <button class="btn-approve" (click)="approveCourse(course.id)">Approve</button>
                <button class="btn-reject" (click)="rejectCourse(course.id)">Reject</button>
              </div>
            </div>
            }
          </div>
        </section>

        <section class="card-section">
          <h2>Recent Users</h2>
          <div class="users-list">
            @for (user of recentUsers(); track user.id) {
            <div class="user-item">
              <div class="user-avatar-small">{{ user.name.charAt(0) }}</div>
              <div class="user-item-info">
                <h4>{{ user.name }}</h4>
                <p>{{ user.email }}</p>
                <div class="user-meta">
                  <span class="role-badge" [class]="'role-' + user.role">{{ user.role }}</span>
                  <span class="join-date">{{ user.joinedDate }}</span>
                </div>
              </div>
              <button class="btn-view" (click)="viewUser(user.id)">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
            }
          </div>
        </section>
      </div>

      <div class="right-column">
        <section class="card-section">
          <h2>Recent Activity</h2>
          <div class="activity-list">
            @for (activity of recentActivity(); track $index) {
            <div class="activity-item">
              <div class="activity-icon" [class]="'activity-' + activity.type"></div>
              <div class="activity-details">
                <p>{{ activity.action }}</p>
                <span class="activity-time">{{ activity.time }}</span>
              </div>
            </div>
            }
          </div>
        </section>
      </div>
    </div>
  </main>
</div>
